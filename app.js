webpackJsonp([0],{138:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var i=e[o](a),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s});var o=n(521),a=this,i={LOAD_CRIME:"LOAD_CRIME",RECEIVE_CRIME:"RECEIVE_CRIME",PUSH_ERROR:"PUSH_ERROR",POP_ERROR:"POP_ERROR"},u=function(t){return{type:i.RECEIVE_CRIME,payload:{crimes:t}}},c=function(t){return function(e){e({type:i.PUSH_ERROR,payload:{error:t}}),setTimeout(function(){return e({type:i.POP_ERROR})},2e3)}},s=function(t){return function(){var e=r(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:i.LOAD_CRIME}),e.prev=1,e.next=4,Object(o.a)(t);case 4:r=e.sent,n(u(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),window.console.error(e.t0),n(c(e.t0.message));case 12:case"end":return e.stop()}},e,a,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()}},213:function(t,e){function n(t){var e=void 0===t?"undefined":r(t);return null!=t&&("object"==e||"function"==e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=n},214:function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(526),a="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,i=o||a||Function("return this")();t.exports=i},215:function(t,e,n){var r=n(214),o=r.Symbol;t.exports=o},217:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(140),o=(n.n(r),n(400)),a=(n.n(o),n(42)),i=n.n(a),u=n(175),c=n.n(u),s=n(491);c.a.render(i.a.createElement(s.a,null),document.getElementById("app"))},400:function(t,e){},491:function(t,e,n){"use strict";var r=n(42),o=n.n(r),a=n(72),i=n(518),u=n(523),c=n(534),s=n(536);e.a=function(){return o.a.createElement(a.Provider,{store:Object(i.a)()},o.a.createElement("div",{id:"layout"},o.a.createElement(u.a,null),o.a.createElement(c.a,null),o.a.createElement(s.a,null)))}},518:function(t,e,n){"use strict";var r=n(90),o=n(211),a=(n.n(o),n(212)),i=n.n(a),u=n(519);e.a=function(){var t=[i.a];return Object(r.createStore)(u.a,r.applyMiddleware.apply(void 0,t))}},519:function(t,e,n){"use strict";var r=n(90),o=n(520),a=n(522);e.a=Object(r.combineReducers)({crime:o.a,status:a.a})},520:function(t,e,n){"use strict";var r=n(138),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={crimes:[]};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments[1];switch(e.type){case r.a.RECEIVE_CRIME:return o({},t,{crimes:e.payload.crimes});default:return t}}},521:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var i=e[o](a),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}n.d(e,"a",function(){return a});var o=this,a=function(){var t=r(regeneratorRuntime.mark(function t(e){var n,r,a,i=e.north,u=e.east,c=e.south,s=e.west;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=1,r=i+","+s+":"+i+","+u+":"+c+","+u+":"+c+","+s,a="https://data.police.uk/api/crimes-street/all-crime?poly="+r,t.next=6,fetch(a);case 6:n=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(1),new Error("Couldn't fetch crime: "+t.t0.message+".");case 12:t.t1=n.status,t.next=200===t.t1?15:503===t.t1?18:19;break;case 15:return t.next=17,n.json();case 17:return t.abrupt("return",t.sent);case 18:throw new Error("Too much crime to load .. please reduce the zoom level.");case 19:throw window.console.error("Unexpected Error: "+n),new Error("Something went wrong .. Check the console for more details.");case 21:case"end":return t.stop()}},t,o,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},522:function(t,e,n){"use strict";var r=n(138),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={loading:!1,error:null};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments[1];switch(e.type){case r.a.LOAD_CRIME:return o({},t,{loading:!0});case r.a.RECEIVE_CRIME:return o({},t,{loading:!1});case r.a.PUSH_ERROR:return o({},t,{loading:!1,error:e.payload.error});case r.a.POP_ERROR:return o({},t,{loading:!1,error:null});default:return t}}},523:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var i=e[o](a),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return h});var u,c,s=n(42),f=n.n(s),l=n(72),p=n(524),y=n.n(p),m=n(533),v=n(138),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=(u=Object(l.connect)(function(t){return{crimes:t.crime.crimes}},{updateCrime:v.b}))(c=function(t){function e(){var t;o(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var u=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return u.state={},u._updateCrimeFromMap=y()(u._updateCrimeFromMap,500),u}return i(e,t),d(e,[{key:"componentDidMount",value:function(){this._setupGoogleMaps()}},{key:"componentWillReceiveProps",value:function(t){var e=t.crimes;this._updateHeatMap(e)}},{key:"render",value:function(){var t=this.state.msg;return f.a.createElement("div",{id:"map",ref:"mapwrapper"},f.a.createElement("b",null,t))}},{key:"_setupGoogleMaps",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setState({msg:"Loading Google Maps API .."}),t.next=4,(new m.a).init(this.refs.mapwrapper);case 4:this.mapHelper=t.sent,this.mapHelper.onBoundsChanged(function(t){return e._updateCrimeFromMap(t)}),this._updateCrimeFromMap(this.mapHelper.getBounds()),this.setState({msg:null}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),window.console.error(t.t0),this.setState({msg:"Loading Map failed. Please reload the page or try again later."});case 14:case"end":return t.stop()}},t,this,[[0,10]])}));return t}()},{key:"_updateCrimeFromMap",value:function(t){var e=t.north,n=t.east,r=t.south,o=t.west;this.props.updateCrime({north:e,east:n,south:r,west:o})}},{key:"_updateHeatMap",value:function(t){this.mapHelper.updateHeatMap(t.map(function(t){return t.location}))}}]),e}(f.a.Component))||c},524:function(t,e,n){function r(t,e,n){function r(e){var n=b,r=g;return b=g=void 0,R=e,O=t.apply(r,n)}function f(t){return R=t,E=setTimeout(y,e),j?r(t):O}function l(t){var n=t-_,r=t-R,o=e-n;return S?s(o,w-r):o}function p(t){var n=t-_,r=t-R;return void 0===_||n>=e||n<0||S&&r>=w}function y(){var t=a();if(p(t))return m(t);E=setTimeout(y,l(t))}function m(t){return E=void 0,x&&b?r(t):(b=g=void 0,O)}function v(){void 0!==E&&clearTimeout(E),R=0,b=_=g=E=void 0}function d(){return void 0===E?O:m(a())}function h(){var t=a(),n=p(t);if(b=arguments,g=this,_=t,n){if(void 0===E)return f(_);if(S)return E=setTimeout(y,e),r(_)}return void 0===E&&(E=setTimeout(y,e)),O}var b,g,w,O,E,_,R=0,j=!1,S=!1,x=!0;if("function"!=typeof t)throw new TypeError(u);return e=i(e)||0,o(n)&&(j=!!n.leading,S="maxWait"in n,w=S?c(i(n.maxWait)||0,e):w,x="trailing"in n?!!n.trailing:x),h.cancel=v,h.flush=d,h}var o=n(213),a=n(525),i=n(527),u="Expected a function",c=Math.max,s=Math.min;t.exports=r},525:function(t,e,n){var r=n(214),o=function(){return r.Date.now()};t.exports=o},526:function(t,e,n){(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(e,n(43))},527:function(t,e,n){function r(t){if("number"==typeof t)return t;if(a(t))return i;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var n=s.test(t);return n||f.test(t)?l(t.slice(2),n?2:8):c.test(t)?i:+t}var o=n(213),a=n(528),i=NaN,u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt;t.exports=r},528:function(t,e,n){function r(t){return"symbol"==(void 0===t?"undefined":o(t))||i(t)&&a(t)==u}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(529),i=n(532),u="[object Symbol]";t.exports=r},529:function(t,e,n){function r(t){return null==t?void 0===t?c:u:s&&s in Object(t)?a(t):i(t)}var o=n(215),a=n(530),i=n(531),u="[object Null]",c="[object Undefined]",s=o?o.toStringTag:void 0;t.exports=r},530:function(t,e,n){function r(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[c]=n:delete t[c]),o}var o=n(215),a=Object.prototype,i=a.hasOwnProperty,u=a.toString,c=o?o.toStringTag:void 0;t.exports=r},531:function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},532:function(t,e){function n(t){return null!=t&&"object"==(void 0===t?"undefined":r(t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=n},533:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var i=e[o](a),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return c});var a=n(216),i=n.n(a),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(){function t(){o(this,t),this.map=null,this.heatmap=null,this.assertIsInitialised=function(){throw new Error("GoogleMapsHelper has not been initialised!")}}return u(t,[{key:"init",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({key:"AIzaSyDBjazFbNLoJ0zDtg-BgRbKrcXZCqsDEBU",libraries:["visualization"]});case 2:return this.api=t.sent,this.map=this._createMap(this.api,e),this.heatmap=this._createHeatMap(this.api),this.heatmap.setMap(this.map),this.assertIsInitialised=function(){},t.abrupt("return",this);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"updateHeatMap",value:function(t){var e=this;this.assertIsInitialised();var n=this.api.LatLng;this.heatmap.data.clear(),t.forEach(function(t){e.heatmap.data.push(new n(t.latitude,t.longitude))})}},{key:"getBounds",value:function(){this.assertIsInitialised();var t=this.map.getBounds();if(t)return t.toJSON()}},{key:"onBoundsChanged",value:function(t){var e=this;this.map.addListener("bounds_changed",function(){var n=e.getBounds();n&&t(n)})}},{key:"_createMap",value:function(t,e){return new(0,t.Map)(e,{center:{lat:51.5033,lng:-.1195},zoom:15,minZoom:13})}},{key:"_createHeatMap",value:function(t){return new(0,t.visualization.HeatmapLayer)({opacity:.4,radius:40,dissipating:!0,data:[]})}}]),t}()},534:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var i,u,c=n(42),s=n.n(c),f=n(72),l=n(139),p=n.n(l),y=n(535),m=n.n(y),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=(i=Object(f.connect)(function(t){return{loading:t.status.loading}}))(u=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),v(e,[{key:"render",value:function(){var t=this.props.loading;return s.a.createElement("div",{id:"loading-message",className:p()("message",{active:t})},s.a.createElement("b",null,"Loading .. "),s.a.createElement("img",{src:m.a}))}}]),e}(s.a.Component))||u},535:function(t,e,n){t.exports=n.p+"robber.gif?7a9e75014d2aa330bae579fc03a51074"},536:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return m});var i,u,c=n(42),s=n.n(c),f=n(72),l=n(139),p=n.n(l),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=(i=Object(f.connect)(function(t){return{error:t.status.error}}))(u=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),y(e,[{key:"render",value:function(){var t=this.props.error;return s.a.createElement("div",{id:"error-message",className:p()("message",{active:!!t})},s.a.createElement("b",null,t))}}]),e}(s.a.Component))||u}},[217]);